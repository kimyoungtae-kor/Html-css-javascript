<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- CDN content delivery network -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js" integrity="sha512-hUhvpC5f8cgc04OZb55j0KNGh4eh7dLxd/dPSJ5VyzqDWxsayYbojWyl5Tkcgrmb/RVKCRJI1jNlRbVP4WWC4w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment-with-locales.min.js" integrity="sha512-4F1cxYdMiAW98oomSLaygEwmCnIP38pb4Kx70yQYqRwLVCs3DbRumfBq82T08g/4LJ/smbFGFpmeFlQgoDccgg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        // moment.locale("ko")
        // console.log(moment.locale());

        const now = new Date();
        now.setDate(1);
        now.setMonth(11);
        // now.setDate(24);
        // const m = moment(now);
        // const mid = moment('2023/10/23', 'YYYY/MM/DD')
        // console.log(mid.format('yyyy/MM/DD HH:mm:ss'));
        // console.log(mid.fromNow());
        // console.log(m.format('yyyy/MM/DD HH:mm:ss'));
     
        console.log(now);
        
        const days = ['일', '월', '화', '수', '목', '금', '토']
        const lastDates = [31,28,31,30,31,30,31,31,30,31,30,31];

        const firstDay = now.getDay();
        let lastDate = lastDates[now.getMonth()];

        const year = now.getFullYear();
        console.log(year);
        if(now.getMonth() == 1 && year % 4 == 0 && year % 100 != 0 || year % 400 == 0){
            lastDate = 29;
        }

        let calStr = '';
        calStr += '<table>';
        calStr += `<caption><h2>${now.getFullYear()}/${now.getMonth()+1}</h2></caption>`;
        // 제목부분
        calStr += '<tr>';
        // 7회 반복
        for(let val of days) {
            calStr += `<th>${val}</th>`;
        }
        calStr += '</tr>';
        // 날짜부분
        calStr += '<tr>';

            document.write(firstDay);
            document.write(now.getDay());
        const endPoint = parseInt((lastDate + firstDay + 6) / 7) * 7 - firstDay;
        for(let i = 1 - firstDay; i <= endPoint; i++){
            // let a = i;
            // if(i <= 0){
            //     a = " ";
            // }
            if(i < 1 || i > lastDate){
                calStr += `<td></td>`;
            }else{
                calStr += `<td>${i}</td>`;
            }
            
            if(i % 7 == (7 - firstDay) % 7){
                calStr += `<tr></tr>`;
            }
        }
        calStr += '</tr>';

        calStr += '</table>';

        document.write(calStr)
        

        window.opener();
    //     let str = `<table>
    //     <tr>
    //         <th>일</th>
    //         <th>월</th>
    //         <th>화</th>
    //         <th>수</th>
    //         <th>목</th>
    //         <th>금</th>
    //         <th>토</th>
    //     </tr>
    //     <tr>
    //         <td>1</td>
    //         <td>2</td>
    //         <td>3</td>
    //         <td>4</td>
    //         <td>5</td>
    //         <td>6</td>
    //         <td>7</td>
    //     </tr>
    //     <tr>
    //         <td>8</td>
    //         <td>9</td>
    //         <td>10</td>
    //         <td>11</td>
    //         <td>12</td>
    //         <td>13</td>
    //         <td>14</td>
    //     </tr>
    //     <tr>
    //         <td>15</td>
    //         <td>16</td>
    //         <td>17</td>
    //         <td>18</td>
    //         <td>19</td>
    //         <td>20</td>
    //         <td>21</td>
    //     </tr>
    //     <tr>
    //         <td>22</td>
    //         <td>23</td>
    //         <td>24</td>
    //         <td>25</td>
    //         <td>26</td>
    //         <td>27</td>
    //         <td>28</td>
    //     </tr>
    // </table>`
        
    </script>
    <style>
        /* table, th, td {border: 1px solid black;} */
        th {border-bottom: 3px solid #222;}
        table {border-collapse: collapse; margin: 0 auto;}
        th, td {padding: 25px; text-align: center;}
        tr > *:first-child {color: red;}
        tr > *:last-child {color: blue;
           }
    </style>
</head>
<body>
    <div id="cal"></div>
    
</body>
</html>